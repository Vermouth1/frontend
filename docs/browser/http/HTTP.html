<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP | whisperwind</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/frontend/assets/css/0.styles.5583c977.css" as="style"><link rel="preload" href="/frontend/assets/js/app.9af0d489.js" as="script"><link rel="preload" href="/frontend/assets/js/2.92dfc871.js" as="script"><link rel="preload" href="/frontend/assets/js/4.92bd4596.js" as="script"><link rel="prefetch" href="/frontend/assets/js/10.2417283f.js"><link rel="prefetch" href="/frontend/assets/js/11.ce9d5501.js"><link rel="prefetch" href="/frontend/assets/js/12.99c97a8d.js"><link rel="prefetch" href="/frontend/assets/js/13.a192cdbb.js"><link rel="prefetch" href="/frontend/assets/js/14.f49f8c43.js"><link rel="prefetch" href="/frontend/assets/js/15.32af6305.js"><link rel="prefetch" href="/frontend/assets/js/16.b1436089.js"><link rel="prefetch" href="/frontend/assets/js/17.5fc3236e.js"><link rel="prefetch" href="/frontend/assets/js/18.ff5d8014.js"><link rel="prefetch" href="/frontend/assets/js/19.5d39f230.js"><link rel="prefetch" href="/frontend/assets/js/20.aac1b8d3.js"><link rel="prefetch" href="/frontend/assets/js/21.2734a3ce.js"><link rel="prefetch" href="/frontend/assets/js/22.d42af8d0.js"><link rel="prefetch" href="/frontend/assets/js/23.a83d6c9e.js"><link rel="prefetch" href="/frontend/assets/js/24.910a39a5.js"><link rel="prefetch" href="/frontend/assets/js/25.e6bd1806.js"><link rel="prefetch" href="/frontend/assets/js/26.a10914c2.js"><link rel="prefetch" href="/frontend/assets/js/27.2f0a1f63.js"><link rel="prefetch" href="/frontend/assets/js/28.8c33be4a.js"><link rel="prefetch" href="/frontend/assets/js/29.3cf34540.js"><link rel="prefetch" href="/frontend/assets/js/3.4265ed86.js"><link rel="prefetch" href="/frontend/assets/js/30.1d109935.js"><link rel="prefetch" href="/frontend/assets/js/31.766af987.js"><link rel="prefetch" href="/frontend/assets/js/32.2dc4b990.js"><link rel="prefetch" href="/frontend/assets/js/33.45dfc6cb.js"><link rel="prefetch" href="/frontend/assets/js/34.f03b4410.js"><link rel="prefetch" href="/frontend/assets/js/35.58bfb24d.js"><link rel="prefetch" href="/frontend/assets/js/36.8fc8fe18.js"><link rel="prefetch" href="/frontend/assets/js/37.5b21228f.js"><link rel="prefetch" href="/frontend/assets/js/38.1ba642b3.js"><link rel="prefetch" href="/frontend/assets/js/39.d5cc41f1.js"><link rel="prefetch" href="/frontend/assets/js/40.d5c211ae.js"><link rel="prefetch" href="/frontend/assets/js/41.a0c3a0a0.js"><link rel="prefetch" href="/frontend/assets/js/42.a2071f24.js"><link rel="prefetch" href="/frontend/assets/js/43.46eaa987.js"><link rel="prefetch" href="/frontend/assets/js/44.87154a9b.js"><link rel="prefetch" href="/frontend/assets/js/45.cfd97f4b.js"><link rel="prefetch" href="/frontend/assets/js/46.47869390.js"><link rel="prefetch" href="/frontend/assets/js/47.806eeabf.js"><link rel="prefetch" href="/frontend/assets/js/5.3c8cd087.js"><link rel="prefetch" href="/frontend/assets/js/6.f11af450.js"><link rel="prefetch" href="/frontend/assets/js/7.dbd79068.js"><link rel="prefetch" href="/frontend/assets/js/8.11c4b32a.js"><link rel="prefetch" href="/frontend/assets/js/9.6335d493.js">
    <link rel="stylesheet" href="/frontend/assets/css/0.styles.5583c977.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend/" class="home-link router-link-active"><!----> <span class="site-name">whisperwind</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend/browser/" class="nav-link router-link-active">
  浏览器
</a></div><div class="nav-item"><a href="/frontend/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/frontend/javascript/基础语法.html" class="nav-link">
  Javascript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react/" class="nav-link">
  React
</a></li></ul></div></div> <a href="https://gitee.com/whisperw1nd/frontend" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitee
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/frontend/browser/" class="nav-link router-link-active">
  浏览器
</a></div><div class="nav-item"><a href="/frontend/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/frontend/javascript/基础语法.html" class="nav-link">
  Javascript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontend/react/" class="nav-link">
  React
</a></li></ul></div></div> <a href="https://gitee.com/whisperw1nd/frontend" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitee
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/frontend/browser/http/HTTP请求流程.html" class="sidebar-link">HTTP请求流程</a></li><li><a href="/frontend/browser/http/HTTP.html" aria-current="page" class="active sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/browser/http/HTTP.html#http-0-9" class="sidebar-link">HTTP/0.9</a></li><li class="sidebar-sub-header"><a href="/frontend/browser/http/HTTP.html#http-1-0" class="sidebar-link">HTTP/1.0</a></li><li class="sidebar-sub-header"><a href="/frontend/browser/http/HTTP.html#http-1-1" class="sidebar-link">HTTP/1.1</a></li><li class="sidebar-sub-header"><a href="/frontend/browser/http/HTTP.html#http2" class="sidebar-link">HTTP2</a></li><li class="sidebar-sub-header"><a href="/frontend/browser/http/HTTP.html#http3" class="sidebar-link">HTTP3</a></li></ul></li><li><a href="/frontend/browser/http/HTTPS.html" class="sidebar-link">HTTPS</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http"><a href="#http" class="header-anchor">#</a> HTTP</h1> <h2 id="http-0-9"><a href="#http-0-9" class="header-anchor">#</a> HTTP/0.9</h2> <p>由于需求简单，实现也简单，采用了基于请求响应的模式，从客户端发出请求，服务器返回数据。</p> <ul><li><strong>是只有一个请求行，并没有 HTTP 请求头和请求体</strong></li> <li><strong>服务器也没有返回头信息，这是因为服务器端并不需要告诉客户端太多信息，只需要返回数据就可以了。</strong></li> <li><strong>返回的文件内容是以 ASCII 字符流来传输的</strong></li></ul> <h2 id="http-1-0"><a href="#http-1-0" class="header-anchor">#</a> HTTP/1.0</h2> <ul><li>加入了<strong>请求头和响应头</strong>，用来携带更多信息，并且在请求头中加入了<strong>用户代理</strong>字段</li> <li>加入<strong>状态码</strong></li> <li>提供 <strong>Cache</strong> 机制</li></ul> <h2 id="http-1-1"><a href="#http-1-1" class="header-anchor">#</a> HTTP/1.1</h2> <ul><li>改进持久连接，在<strong>一个 TCP 连接上可以传输多个 HTTP 请求，只要浏览器或者服务器没有明确断开连接，那么该 TCP 连接会一直保持。</strong></li> <li>为了解决<strong>队头阻塞</strong>，通过<strong>管线化</strong>(将多个 HTTP 请求整批提交给服务器的技术)来解决，最后弃用</li> <li>提供<strong>虚拟主机</strong>的支持，请求头中增加了 Host 字段，用来表示当前的域名地址</li> <li>对动态生成的内容提供了完美支持。引入 <strong>Chunk transfer</strong> 机制分块传输</li> <li>引入了客户端 <strong>Cookie</strong> 机制和安全机制</li></ul> <p>缺点问题：对带宽的利用率却并不理想</p> <ol><li>TCP 的慢启动。例如一些关键资源本身大小不大，但是由于慢启动也会耗费时间</li> <li>宽带不足的时候，无法保证关键资源优先下载</li> <li>队头阻塞问题，一个请求发出后，直到有了响应，才会继续发下一个请求</li></ol> <div class="custom-block tip"><p class="custom-block-title">慢启动</p> <p>TCP在连接建立成功后会向网络中发送大量的数据包，这样很容易导致网络中路由器缓存空间耗尽，从而发生拥塞。因此新建立的连接不能够一开始就大量发送数据包，而只能根据网络情况逐步增加每次发送的数据量，以避免上述现象的发生。</p></div> <h2 id="http2"><a href="#http2" class="header-anchor">#</a> HTTP2</h2> <p>一个域名只使用一个 TCP 长连接</p> <p>核心：多路复用，就是在一个 TCP 连接中存在多条流传输数据（流是多个帧组成的数据流，帧是最小的数据单位，有相同 id 的帧合并成流），即发送多条请求</p> <p>优点：解决了 HTTP1 对头堵塞，但并没有解决 TCP 的队头堵塞（TCP数据包是有序传输，中间一个数据包丢失，会等待该数据包重传，造成后面的数据包的阻塞）</p> <p><img src="/frontend/assets/img/HTTP2.86cdf01a.png" alt="HTTP2"></p> <ol><li>浏览器准备好请求数据，包括了请求行、请求头等信息，如果是 POST 方法，那么还要有请求体。</li> <li>这些数据经过二进制分帧层处理之后，会被转换为一个个带有请求 ID 编号的帧，通过协议栈将这些帧发送给服务器。</li> <li>服务器接收到所有帧之后，会将所有相同 ID 的帧合并为一条完整的请求信息(数据流)。</li> <li>然后服务器处理该条请求，并将处理的响应行、响应头和响应体分别发送至二进制分帧层。</li> <li>同样，二进制分帧层会将这些响应数据转换为一个个带有请求 ID 编号的帧，经过协议栈发送给浏览器。</li> <li>浏览器接收到响应帧之后，会根据 ID 编号将帧的数据提交给对应的请求。</li></ol> <p>其他特性：</p> <ol><li>可以设置请求的优先级。可以在发送请求时，标上该请求的优先级，这样服务器接收到请求之后，会优先处理优先级高的请求。</li> <li>服务器推送。直接将数据提前推送到浏览器。</li> <li>头部压缩。对请求头和响应头进行了压缩</li></ol> <p>缺点：</p> <ol><li>由于多个请求只有一个 TCP 管道，如果其中任意一路数据流中出现了丢包的情况，那么就会阻塞该 TCP 连接中的所有请求。当系统达到了 2% 的丢包率时，HTTP/1.1 的传输效率反而比 HTTP/2 表现得更好。</li> <li>TCP 连接延时。三次握手过程，大概需要花费 3-4 个 RTT</li></ol> <h2 id="http3"><a href="#http3" class="header-anchor">#</a> HTTP3</h2> <p>HTTP3 采用了 UDP 协议，基于 UDP 实现了类似于 TCP 的多路数据流、传输可靠性等功能的 QUIC 协议</p> <p><img src="/frontend/assets/img/HTTP3&amp;HTTP2.0bae470b.png" alt="HTTP3&amp;HTTP2"></p> <h3 id="udp"><a href="#udp" class="header-anchor">#</a> UDP</h3> <p>UDP 是用户数据包协议（User Datagram Protocol），UDP 中一个最重要的信息是端口号，IP 通过 IP 地址信息把数据包发送给指定的电脑，而 UDP 通过端口号把数据包分发给正确的程序。<strong>UDP 并不提供重发机制，只是丢弃当前的包，但是传输速度却非常快</strong></p> <p><img src="/frontend/assets/img/UDP.3edb673a.png" alt="UDP"></p> <p>HTTP3特性：</p> <ol><li>实现了类似 TCP 的流量控制、传输可靠性的功能。虽然 UDP 不提供可靠性的传输，但 QUIC 在 UDP 的基础之上增加了一层来保证数据可靠性传输。它提供了数据包重传、拥塞控制以及其他一些 TCP 中存在的特性。</li> <li>集成了 TLS 加密功能。目前 QUIC 使用的是 TLS1.3，相较于早期版本 TLS1.3 有更多的优点，其中最重要的一点是减少了握手所花费的 RTT 个数。</li> <li>实现了 HTTP/2 中的多路复用功能，实现了在同一物理连接上可以有多个独立的逻辑数据流（如下图）。实现了数据流的单独传输，就解决了 TCP 中队头阻塞的问题。<img src="/frontend/assets/img/QUIC.05cc5720.png" alt="QUIC"></li> <li>实现了快速握手功能。由于 QUIC 是基于 UDP 的，所以 QUIC 可以实现使用 0-RTT 或者 1-RTT 来建立连接，这意味着 QUIC 可以用最快的速度来发送和接收数据，这样可以大大提升首次打开页面的速度。</li></ol> <p>目前存在的问题：</p> <ol><li>浏览器支持的问题</li> <li>系统内核对 UDP 的优化远远没有达到 TCP 的优化程度</li> <li>中间设备僵化的问题。这些设备对 UDP 的优化程度远远低于 TCP，据统计使用 QUIC 协议时，大约有 3%～7% 的丢包率。</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/31/2020, 10:17:41 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/browser/http/HTTP请求流程.html" class="prev">
        HTTP请求流程
      </a></span> <span class="next"><a href="/frontend/browser/http/HTTPS.html">
        HTTPS
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/frontend/assets/js/app.9af0d489.js" defer></script><script src="/frontend/assets/js/2.92dfc871.js" defer></script><script src="/frontend/assets/js/4.92bd4596.js" defer></script>
  </body>
</html>
